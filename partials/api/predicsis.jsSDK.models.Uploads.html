<a href="https://github.com/yllieth/predicsis_ml_sdk-javascript/edit/master/lib/model/Uploads.js" class="improve-docs"><i class="icon-edit"> </i>Improve this doc</a><a href="https://github.com/yllieth/predicsis_ml_sdk-javascript/blob/761f880/lib/model/Uploads.js#L30" class="view-source"><i class="icon-eye-open"> </i>View source</a><h1><code ng:non-bindable="">Uploads</code>
<div><span class="hint">service in module <code ng:non-bindable="">predicsis.jsSDK.models</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="predicsis-jssdk-models-uploads-page"><table>
<tr>
  <td><span class="badge get">get</span> <kbd>/sources/credentials/s3</kbd></td>
  <td><kbd><a href="#/api/predicsis.jsSDK.models.Uploads#methods_getcredentials">Upload.getCredentials()</a></kbd></td>
  <td></td>
</tr>
<tr>
  <td><span class="badge post">post</span> <kbd>/sources/credentials/s3</kbd></td>
  <td><kbd><a href="#/api/predicsis.jsSDK.models.Uploads#methods_sign">Upload.sign(key)</a></kbd></td>
  <td></td>
</tr>
<tfoot>
<tr><td colspan="3">Official documentation is available at <a href="https://developer.predicsis.com/doc/v1/data_management/upload/">https://developer.predicsis.com/doc/v1/data_management/upload/</a></td></tr>
</tfoot>
</table>

<p>Uploads are performed in 3 steps (this model only deals with the first one):</p>
<ul>
<li>Get credentials to our storage service and upload a file</li>
<li>Create a source to persist upload in our database</li>
<li>Create a dataset from this source</li>
</ul></div></div>
<h2 id="dependencies">Dependencies</h2>
<ul class="dependencies"><li><code ng:non-bindable=""><a href="#/api/ng.$q">$q</a></code>
</li>
<li><code ng:non-bindable=""><a href="#/api/Restangular">Restangular</a></code>
</li>
</ul>
<div class="member method"><h2 id="methods">Methods</h2>
<ul class="methods"><li><a href="https://github.com/yllieth/predicsis_ml_sdk-javascript/blob/761f880/lib/model/Uploads.js#L61" class="view-source icon-eye-open"> </a><h3 id="methods_getcredentials">getCredentials(storageService)</h3>
<div class="getcredentials"><div class="getcredentials-page"><p>Request credentials to our storage service
Credentials for S3 storage looks like:
<pre class="prettyprint linenums">
{
  credentials: {
    expires_at: "2014-06-23T08:07:19.000Z",
    key: "uploads/5347b31750432d45a5020000/sources/1415101671848/${filename}",
    aws_access_key_id: "predicsis_aws_access_key_id",
    signature: "encoded_signature",
    policy: "encoded_policy",
    s3_endpoint: "http://dev.public.kml-api.s3-us-west-2.amazonaws.com"
  }
}
</pre>
</div><h5 id="methods_getcredentials_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>storageService</td><td><a href="" class="label type-hint type-hint-string">String</a></td><td><div class="getcredentials-page"><p>Available services are : <ul><li><code>s3</code></li></ul></p>
</div></td></tr></tbody></table><h5 id="methods_getcredentials_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="getcredentials-page"><p>See above description</p>
</div></td></tr></table></div>
</li>
<li><a href="https://github.com/yllieth/predicsis_ml_sdk-javascript/blob/761f880/lib/model/Uploads.js#L94" class="view-source icon-eye-open"> </a><h3 id="methods_sign">sign(key)</h3>
<div class="sign"><div class="sign-page"><p>Sign POST requests from fineuploader library
This route is required to use <a href="http://docs.fineuploader.com/branch/master/endpoint_handlers/amazon-s3.html#required-server-side-tasks-all-browsers">fineuploader library</a>.</p>
<p><b>Important note</b>
This request returns a object like:
<pre class="prettyprint linenums">
{
  credentials: {
    expires_at: "2014-06-23T08:07:19.000Z",
    key: "uploads/5347b31750432d45a5020000/sources/1415101671848/${filename}",
    aws_access_key_id: "predicsis_aws_access_key_id",
    signature: "encoded_signature",
    policy: "encoded_policy",
    s3_endpoint: "http://dev.public.kml-api.s3-us-west-2.amazonaws.com"
  }
}
</pre>
<p>... but the library only needs (and expects) <kbd>policy</kbd> and <kbd>signature</kbd> properties. So I had to
change the source code of fineuploader lib to remove the header of the response. That&#39;s the main reason to commit
this source code in the project (under <kbd>app/vendor/s3.fineuploader-5.0.8/</kbd>).</p>
</div><h5 id="methods_sign_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>key</td><td><a href="" class="label type-hint type-hint-string">String</a></td><td><div class="sign-page"><p>Path where the file is going to be uploaded</p>
</div></td></tr></tbody></table><h5 id="methods_sign_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="sign-page"><p>A credentials object which must contains at least <kbd>policy</kbd> and <kbd>signature</kbd> properties.</p>
</div></td></tr></table></div>
</li>
</ul>
</div>
</div>
